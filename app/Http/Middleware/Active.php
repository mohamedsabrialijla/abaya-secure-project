<?phpnamespace App\Http\Middleware;use Closure;use Illuminate\Support\Facades\Auth;class Active{    /**     * Handle an incoming request.     *     * @param  \Illuminate\Http\Request $request     * @param  \Closure $next     * @return mixed     */    public function handle($request, Closure $next)    {        if (Auth::guard('system_admin')->check()) {            return $next($request);        }        if (Auth::guard('web')->check()) {            $guard = 'web';        }        if (Auth::guard('store')->check()) {            $guard = 'store';            switch (Auth::guard('store')->user()->status) {                case 1:  // active                    return $next($request);                    break;                default:  // not valid contract                    Auth::guard('store')->logout();                    flash('انت معطل من قبل الادارة','error');                    return redirect()->route('store.showLogin');            }        }        return $this->controlGuardAction($guard, $request, $next);    }    private function controlGuardAction($guard, $request, Closure $next)    {        $status = Auth::user()->status;        switch ($status) {            case 1:                return $next($request);                break;            case 0:                Auth::guard($guard)->logout();                return redirect()->route($guard .'.activate');                break;            case 2:                Auth::guard($guard)->logout();                return redirect()->route($guard . '.blocked');                break;        }    }}