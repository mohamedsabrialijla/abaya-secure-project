function showMessage(e,a){Swal.fire({title:e.title,text:e.message,type:e.type,timer:3e3,showConfirmButton:!1}).then(function(){a&&(window.location=a)})}$body=$("body"),$(document).on({ajaxStart:function(){$body.addClass("loading")},ajaxStop:function(){$body.removeClass("loading")}}),$(function(){$body.removeClass("loading"),$body.removeClass("page-loading"),$("select:not('.noSel'):not('.swal2-select')").select2({width:"resolve",placeholder:"الرجاء الاختيار",minimumResultsForSearch:8}),$("input").on("focusout",function(){var e=$(this).parents(".form-group");e.hasClass("has_error")&&(console.log(e,e.find(".has-error")),e.removeClass("has_error"),e.find(".has-error").remove())}),jQuery(document).on("change",".upload_image",function(){var e=$(this).parents(".imageCont");e.hasClass("has_error")&&(console.log(e,e.find(".has-error")),e.removeClass("has_error"),e.find(".has-error").remove())}),$("area").on("focusout",function(){$(this).parents(".form-group").hasClass("has_error")&&($(this).parents(".form-group").removeClass("has_error"),$(this).parents(".form-group").find(".has-error").remove())}),$("select").on("focusout",function(){$(this).parents(".form-group").hasClass("has_error")&&($(this).parents(".form-group").removeClass("has_error"),$(this).parents(".form-group").find(".has-error").remove())}),$(".reset_field").click(function(){$(this).siblings("input").val("")}),$(".autoSubmit").on("change",function(){$body.addClass("loading"),$(this).parents("form").submit()}),$(".normalLink").on("click",function(e){e.ctrlKey||e.altKey||e.shiftKey||$body.addClass("loading")}),$(".CheckedItem").on("click",function(){var e=$(this).data("candel");if(1==e||2==e)if($(this).is(":checked")){if(2==e){$(".DeleteFrmSelect").hide();var a=$(".DeleteFrmSelect").data("lock_count")>0?$(".DeleteFrmSelect").data("lock_count"):0;$(".DeleteFrmSelect").data("lock_count",a+1)}}else 2==e&&(1==(a=$(".DeleteFrmSelect").data("lock_count"))&&$(".DeleteFrmSelect").show(),$(".DeleteFrmSelect").data("lock_count",a-1))}),$(":required").each(function(){var e=$(this).parent().find("label");e.length>0?e.append('<span class="required_star">*</span>'):$(this).parent().parent().find("label").append('<span class="required_star">*</span>')}),$(".MainImageSelect").click(function(e){e.preventDefault(),$("#imagePrev").empty();var a=$(this).data("parent"),t=$(this).data("inputname"),n=$("input[name='"+t+"']").val();if(n)for(var i=JSON.parse(n),r=0;r<i.length;++r)$("#imagePrev").append('<div class="My_image_prev"><img class="MaInImgSelCted" data-img="'+i[r]+'" data-where="'+a+'" src="'+UrlForAssets+"/uploads/"+i[r]+'"  ></div>')}),$("body").on("click",".btn-doAction",function(){var e=$(this).data("desc")?$(this).data("desc"):"",a=$(this).data("id"),t=$(this).data("url"),n=$(this).data("token");$(this);Swal.fire({title:"هل انت متأكد ؟",text:"هل تريد بالتأكيد القيام بالاجراء   "+e,icon:"warning",showCancelButton:1,confirmButtonText:"نعم , قم بالاجراء !",cancelButtonText:"لا, الغي العملية !",reverseButtons:1}).then(function(e){e.value?$.post(t,{_token:n,id:a},function(e,a){1==e.done?Swal.fire({title:"تم القيام بالعملية بنجاح",text:e.msg,icon:"success",timer:2e3,showConfirmButton:!1}).then(function(){location.reload(!0)}):Swal.fire({title:"حدث خطأ ما",text:e.msg,icon:"error",timer:4e3,showConfirmButton:!1})}).fail(function(e,a){e=e.responseJSON;Swal.fire({title:"خطأ",text:e.response_message,icon:"error",timer:4e3,showConfirmButton:!1})}):e.dismiss&&Swal.fire("تم الالغاء","لم يتم عمل اي تغيير","error")})}),$("body").on("click",".SelIMg",function(){$("#imagePrev").empty();var e=$(this).data("parent"),a=$("input[name='uploaded_multi_image_name']").val();if(a)for(var t=JSON.parse(a),n=0;n<t.length;++n)$("#imagePrev").append('<div class="My_image_prev"><img class="ImgSelCted" data-img="'+t[n]+'" data-where="'+e+'" src="'+UrlForAssets+"/uploads/"+t[n]+'"  ></div>')}).on("click",".ImgSelCted",function(){$(this).data("where");var e=$(this).data("img");$("#imgSel").val(e),$("#ChickIfImageSelected").show(),$("#CloSEForm").click()}).on("click",".MaInImgSelCted",function(){var e=$(this).data("img");$(".uploaded_image_def").val(e),$("#ChickIfImageSelected2").show(),$("#DefaultImagePrev").attr("src",UrlForAssets+"/uploads/"+e),$("#CloSEForm").click()}),$("body").on("click",".btn-del",function(){var e=$(this).data("desc")?$(this).data("desc"):"",a=$(this).data("id"),t=$(this).data("url"),n=$(this).data("token"),i=$(this);Swal.fire({title:"هل انت متأكد ؟",text:"هل تريد بالتأكيد حذف العنصر   "+e,icon:"warning",showCancelButton:1,confirmButtonText:"نعم , قم بالحذف !",cancelButtonText:"لا, الغي العملية !",reverseButtons:1}).then(function(e){e.value?$.post(t,{_token:n,id:a},function(e,a){1==e.done?Swal.fire({title:"تم الحذف بنجاح",text:e.msg,icon:"success",timer:2e3,showConfirmButton:!1}).then(function(){var e=i.parents("tr"),a=i.parents(".productItem"),t=i.parents("table");a.css("background","#f00").fadeOut(600),e.css("background","#f00").fadeOut(600,function(){e.remove();var a=1;t.find(".LOOPIDS").each(function(){$(this).text(a),a+=1})})}):Swal.fire({title:"حدث خطأ ",text:e.msg,icon:"error",timer:4e3,showConfirmButton:!1})}).fail(function(e,a){e=e.responseJSON;Swal.fire({title:"خطأ",text:e.response_message,icon:"error",timer:4e3,showConfirmButton:!1})}):e.dismiss&&Swal.fire("تم الالغاء","لم يتم عمل اي تغيير","error")})}),$("body").on("click",".btn_addToList",function(){var e=$(".RetSelect").val(),a=$("#"+e),t=a.data("addurl"),n=a.data("token"),i=$("#name_ar_to_add").val(),r=$("#name_en_to_add").val(),o=$("#image").val();console.log(i,r),""!=i?""!=r?""!=o?$.post(t,{_token:n,name_ar:i,name_en:r,image:o},function(e,t){1==e.done?(a.html(e.out).niceSelect("update"),$("#AddNewModal").modal("hide"),Swal.fire({title:"تمت الاضافة بنجاح",text:"تمت الاضافة بنجاح",icon:"success",timer:2e3,showConfirmButton:!1}),$("#name_ar_to_add").val(""),$("#name_en_to_add").val(""),$("#image").val("")):Swal.fire({title:"حدث خطأ ما",text:"خطأ مجهول",icon:"error",timer:4e3,showConfirmButton:!1})}):alert("Please enter the image"):alert("Please enter the name"):alert("الرجاء ادخال الاسم")}),$("body").on("click","[data-value='9911Add_NeW_tO_The_LiST9911']",function(){var e=$(this).parents(".form-group").find("select");e.val(0).niceSelect("update");$(this);$(".RetSelect").val(e.attr("id")),$("#name_ar_to_add").val(""),$("#name_en_to_add").val(""),$("#AddNewModal").modal("show")}),$("#city123").on("change",function(){var e=this.value;$.get("./acpadmin/dashbord/getArea",{id:e},function(e,a){"true"==e.done&&$("#area").html(e.out)})}),$("#category_id").on("change",function(){if($("#subcategory_id").length>0){var e=this.value;$.get(UrlForScripts+"/getSubs",{id:e},function(e,a){1==e.done&&$("#subcategory_id").html(e.out).niceSelect("update")})}}),$(document).on("click",".DelImage",function(e){e.preventDefault();var a=jQuery("input[name=_token]").val(),t=$(this).data("url"),n=$(this).data("is_main"),i=$(this).data("image"),r=$(this);Swal.fire({title:"هل انت متأكد ؟",text:"هل تريد بالتأكيد حذف الصورة",icon:"warning",showCancelButton:1,confirmButtonText:"نعم , قم بالحذف !",cancelButtonText:"لا, الغي العملية !",reverseButtons:1}).then(function(e){e.value?$.post(t,{_token:a,image:i},function(e,a){1==e.status&&($(".MultiImagePrev").html(e.out),$(".multimg_container").trigger("ImagesChange"),n&&(defDeleted=1,$(".uploaded_image_def").val(""),r.parents(".multimg_container").find("#DefaultImagePrev").attr("src",UrlForAssets+"/blank.png")))}):e.dismiss&&Swal.fire("تم الالغاء","لم يتم عمل اي تغيير","error")})}),$(document).on("click",".DelImageCreate",function(e){e.preventDefault();var a=$(this).data("image"),t=$(this),n=0;a==$(".uploaded_image_def").val()&&(n=1,$(".uploaded_image_def").val(""),t.parents(".multimg_container").find("#DefaultImagePrev").attr("src",UrlForAssets+"/blank.png"));for(var i=JSON.parse($(".uploaded_multi_image_name").val()),r=[],o=0;o<i.length;o++)i[o]!=a&&(r.push(i[o]),n&&($(".uploaded_image_def").val(i[o]),n=0,t.parents(".multimg_container").find("#DefaultImagePrev").attr("src",UrlForAssets+"/uploads/"+i[o])));$(".uploaded_multi_image_name").val(JSON.stringify(r));var s=a.split(".")[0],l=$(".IMGCONT_"+s);l.length&&l.remove(),$(this).parents(".edit_images").remove()}),$(document).on("click",".SetAsDefault",function(e){e.preventDefault();var a=jQuery("input[name=_token]").val(),t=$(this).data("url"),n=$(this).data("image"),i=$(this);Swal.fire({title:"هل انت متأكد ؟",text:"هل تريد بالتأكيد تغيير الصورة الافتراضية",icon:"warning",showCancelButton:1,confirmButtonText:"نعم , قم بالتغيير !",cancelButtonText:"لا, الغي العملية !",reverseButtons:1}).then(function(e){e.value?$.post(t,{_token:a,image:n},function(e,a){1==e.status&&($("#DefaultImagePrev").attr("src",e.default),$(".MultiImagePrev").html(e.out),i.parents(".multimg_container").find(".uploaded_multi_image_name").trigger("ImagesChange"))}):e.dismiss&&Swal.fire("تم الالغاء","لم يتم عمل اي تغيير","error")})}),jQuery(".uploaded_image_name").on("change",function(){var e,a=$(this).val();e=a,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)&&jQuery(".MyImagePrivew").show().attr("src",a)}),jQuery(document).on("change",".upload_image",function(){for(var e=this.files,a=jQuery(this),t=!1,n=0,i=!1,r=new FormData,o=0;o<e.length;++o){var s=e[o],l=s.name,d=parseInt(s.size)/1024;"jpg"!=(n=l.substr(l.lastIndexOf(".")+1).toLowerCase())&&"jpeg"!=n&&"png"!=n&&"gif"!=n||(i=!0),d<=8192&&(t=!0),r.append("uploaded_file",e[o]),r.append("_token",jQuery("input[name=_token]").val())}t&&i?jQuery.ajax({url:UrlForAssets+"/uploadFile",type:"POST",data:r,cache:!0,contentType:!1,processData:!1,dataType:"json",xhr:function(){return new window.XMLHttpRequest},beforeSend:function(e){$("body").removeClass("loading"),a.parent().find(".image-loader").css("display","block"),a.parent().find(".MyImagePrivew").hide(),a.parent().find(".upload-image-error-msg-validation").remove()},success:function(e){flag=!0,1==e.status?(a.parent().find(".image-loader").css("display","none"),a.parent().find(".MyImagePrivew").show().attr("src",e.filelink),a.parent().find(".uploaded_image_name").val(e.file_name).hide()):alert("something goes wrong !")}}):(flag=!0,$(".upload-image-error-msg-validation").remove(),t>4192&&a.parent().append('<span class="upload-image-error-msg-validation">حجم الملف كبير جدا</span>'),0==i&&a.parent().append('<span class="upload-image-error-msg-validation">الرجاء ادخال صور فقط</span>'))}),jQuery(document).on("change",".upload_image_multi",function(){for(var e=this.files,a=jQuery(this),t=!1,n=0,i=!1,r=new FormData,o=0;o<e.length;o++){var s=e[o],l=s.name,d=parseInt(s.size)/1024;"jpg"!=(n=l.substr(l.lastIndexOf(".")+1).toLowerCase())&&"jpeg"!=n&&"png"!=n&&"gif"!=n||(i=!0),d<=8192&&(t=!0),r.append("uploaded_files[]",e[o]),r.append("_token",jQuery("input[name=_token]").val()),r.append("oldData",a.parents(".multimg_container").find(".uploaded_multi_image_name").val())}t&&i?jQuery.ajax({url:UrlForScripts+"/uploadFiles",type:"POST",data:r,cache:!1,contentType:!1,processData:!1,dataType:"json",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable},!1),e},beforeSend:function(e){$("body").removeClass("loading"),a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-image").addClass("fa-spinner fa-spin"),a.parents(".multimg_container").find(".upload-image-error-msg-validation").remove()},success:function(e){if(flag=!0,1==e.status){for(var t="",n=e.links,i="",r="",o=0;o<n.length;o++)t=t+'<div class="edit_images">\n                <img src="'+n[o]+'" class="Muti-Image-prev" alt="">\n                <div class="actions">\n                    <a href="#" class="DelImageCreate" data-image="'+e.resultNames[o]+'" title="حذف"\n                       style="color: red;cursor: pointer;font-size: 1.2em;text-decoration: none;">\n                        <i class="fa fa-trash "></i>\n                    </a>\n                </div>\n            </div>',""==i&&(i=n[o],r=e.resultNames[o]);a.parents(".multimg_container").find(".uploaded_multi_image_name").val(e.result),a.parents(".multimg_container").trigger("ImagesChange"),a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-spinner fa-spin").addClass("fa-image"),a.parents(".multimg_container").find(".MultiImagePrev").html(t),a.parents(".multimg_container").find("#DefaultImagePrev").attr("src",i),a.parents(".multimg_container").find(".uploaded_image_def").val(r)}else alert("هناك خطأ ما !"),a.parents(".multimg_container").find(".progresspar-region").addClass("display-none"),a.parents(".multimg_container").find(".progresspar-region").find(".progresspar-upload").css("width",0),a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-spinner fa-spin").addClass("fa-times")},error:function(e){alert("هناك خطأ ما !"),a.parents(".multimg_container").find(".progresspar-region").addClass("display-none"),a.parents(".multimg_container").find(".progresspar-region").find(".progresspar-upload").css("width",0),a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-spinner fa-spin").addClass("fa-times")}}):(alert("هناك خطأ ما !"),flag=!0,a.parents(".multimg_container").find(".upload-image-error-msg-validation").remove(),t>8192&&a.parents(".multimg_container").find(".imageContainer").append('<span class="upload-image-error-msg-validation">حجم الملف كبير جدا</span>'),0==i&&a.parents(".multimg_container").find(".imageContainer").append('<span class="upload-image-error-msg-validation">الرجاء ادخال صور فقط</span>'))}),jQuery(document).on("change",".upload_image_multi2",function(){for(var e=this.files,a=jQuery(this),t=$(this).data("url"),n=$(this).data("place"),i=!1,r=0,o=!1,s=new FormData,l=0;l<e.length;l++){var d=e[l],c=d.name,m=parseInt(d.size)/1024;"jpg"!=(r=c.substr(c.lastIndexOf(".")+1).toLowerCase())&&"jpeg"!=r&&"png"!=r&&"gif"!=r||(o=!0),m<=8192&&(i=!0),s.append("uploaded_files[]",e[l]),s.append("_token",jQuery("input[name=_token]").val()),s.append("place",n)}i&&o?jQuery.ajax({url:t,type:"POST",data:s,cache:!1,contentType:!1,processData:!1,dataType:"json",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=e.loaded/e.total*100+"%";jQuery(".progresspar-region").find(".progresspar-upload").css("width",a)}},!1),e},beforeSend:function(e){$("body").removeClass("loading"),a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-image").addClass("fa-spinner fa-spin"),a.parents(".multimg_container").find(".upload-image-error-msg-validation").remove()},success:function(e){flag=!0,1==e.status?(a.parents(".multimg_container").find(".MutiImageTextIcon").removeClass("fa-spinner fa-spin").addClass("fa-image"),a.parents(".multimg_container").find(".MultiImagePrev").html(e.out),a.parents(".multimg_container").find(".uploaded_multi_image_name"),a.parents(".multimg_container").trigger("ImagesChange")):alert("something goes wrong !")}}):(flag=!0,alert("something goes wrong !"),$(".upload-image-error-msg-validation").remove(),i>8192&&$(".imageContainer").append('<span class="upload-image-error-msg-validation">حجم الملف كبير جدا</span>'),0==o&&$(".imageContainer").append('<span class="upload-image-error-msg-validation">الرجاء ادخال صور فقط</span>'))}),$("#SelectAll").on("click",function(){$(this).is(":checked")?$(".CheckedItem").each(function(e){$(this).prop("checked",!0)}):$(".CheckedItem").each(function(e){$(this).prop("checked",!1)})}),$(".DoAction").on("click",function(){var e=[];$(".CheckedItem:checked").each(function(a){e[a]=$(this).val()});var a=$(this).data("desc")?$(this).data("desc"):"",t=$(this).data("url"),n=$(this).data("token");if(e.length<1)return Swal.fire("تنبيه","يجب تحديد عنصر واحد على الاقل","warning"),!1;Swal.fire({title:"هل انت متأكد ؟",text:"هل تريد بالتأكيد تنفيذ العملية على العناصر المحددة   "+a,icon:"warning",showCancelButton:1,confirmButtonText:"نعم , قم بالعملية !",cancelButtonText:"لا, الغي العملية !",reverseButtons:1}).then(function(a){a.value?$.post(t,{_token:n,id:e},function(a,n){1==a.done&&(-1!==t.indexOf("delete")?Swal.fire({title:"تم تنفيذ العملية بنجاح",text:"تم تنفيذ العملية بنجاح",icon:"success",timer:2e3,showConfirmButton:!1}).then(function(){for(var a=0;a<e.length;a++){var t=$("#TR_"+e[a]);t.css("background","#f00").fadeOut(600,function(){t.remove()})}var n=$(".table"),i=1;n.find(".LOOPIDS").each(function(){$(this).text(i),i+=1})}):Swal.fire({title:"تم تنفيذ العملية بنجاح",text:"تم تنفيذ العملية بنجاح",icon:"success",timer:2e3,showConfirmButton:!1}).then(function(){location.reload(!0)}))}):a.dismiss&&Swal.fire("تم الالغاء","لم يتم عمل اي تغيير","error")})})});
